{"ast":null,"code":"import * as i0 from \"@angular/core\";\nexport class IDBService {\n  constructor() {}\n  anadirFav() {\n    const peticion = indexedDB.open('PacoApp', 2);\n    peticion.onerror = evento => {\n      throw 'Error al conectar indexedDB';\n    };\n    peticion.onupgradeneeded = evento => {\n      console.log(evento);\n      this.conexion = evento.target.result;\n      this.crear();\n    };\n    peticion.onsuccess = evento => {\n      this.conexion = evento.target.result;\n    };\n  }\n  crear() {\n    const tabla = this.conexion.createObjectStore('Favoritas', {\n      keyPath: 'id',\n      autoIncrement: true\n    });\n  }\n  insertar(objeto) {\n    const transaccion = this.conexion.transaction(['Favoritas'], 'readwrite');\n    transaccion.onerror = evento => {\n      throw 'Error al insertar, alomejor has elegido el mismo ðŸ¥²ðŸ¤”';\n    };\n    const tabla = transaccion.objectStore('Favoritas');\n    const peticion = tabla.add(objeto);\n  }\n}\nIDBService.Éµfac = function IDBService_Factory(t) {\n  return new (t || IDBService)();\n};\nIDBService.Éµprov = /*@__PURE__*/i0.ÉµÉµdefineInjectable({\n  token: IDBService,\n  factory: IDBService.Éµfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AAMA,OAAM,MAAOA,UAAU;EAErBC,eAAgB;EAEhBC,SAAS;IACP,MAAMC,QAAQ,GAAoBC,SAAS,CAACC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;IAC9DF,QAAQ,CAACG,OAAO,GAAGC,MAAM,IAAG;MAAE,MAAM,6BAA6B;IAAA,CAAC;IAClEJ,QAAQ,CAACK,eAAe,GAAID,MAAU,IAAI;MAC9BE,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC;MAC/B,IAAI,CAACI,QAAQ,GAAGJ,MAAM,CAACK,MAAM,CAACC,MAAM;MACpC,IAAI,CAACC,KAAK,EAAE;IACR,CAAC;IACLX,QAAQ,CAACY,SAAS,GAAIR,MAAU,IAAI;MAAE,IAAI,CAACI,QAAQ,GAAGJ,MAAM,CAACK,MAAM,CAACC,MAAM;IAAA,CAAC;EAC7E;EAEAC,KAAK;IACH,MAAME,KAAK,GAAkB,IAAI,CAACL,QAAQ,CAACM,iBAAiB,CAAC,WAAW,EAAE;MAAEC,OAAO,EAAE,IAAI;MAAEC,aAAa,EAAE;IAAI,CAAE,CAAC;EACnH;EAEAC,QAAQ,CAACC,MAAkB;IACzB,MAAMC,WAAW,GAAkB,IAAI,CAACX,QAAQ,CAACY,WAAW,CAAC,CAAC,WAAW,CAAC,EAAE,WAAW,CAAC;IACxFD,WAAW,CAAChB,OAAO,GAAGC,MAAM,IAAG;MAAE,MAAM,uDAAuD;IAAA,CAAC;IAC/F,MAAMS,KAAK,GAAGM,WAAW,CAACE,WAAW,CAAC,WAAW,CAAC;IAClD,MAAMrB,QAAQ,GAAca,KAAK,CAACS,GAAG,CAACJ,MAAM,CAAC;EACjD;;AAxBarB,UAAU;mBAAVA,UAAU;AAAA;AAAVA,UAAU;SAAVA,UAAU;EAAA0B,SAAV1B,UAAU;EAAA2B,YAFT;AAAM","names":["IDBService","constructor","anadirFav","peticion","indexedDB","open","onerror","evento","onupgradeneeded","console","log","conexion","target","result","crear","onsuccess","tabla","createObjectStore","keyPath","autoIncrement","insertar","objeto","transaccion","transaction","objectStore","add","factory","providedIn"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\appPaco\\PACO-APP\\src\\app\\idb.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Peliculas } from './peliculas';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class IDBService {\r\n  public conexion: any;\r\n  constructor() { }\r\n\r\n  anadirFav():void{\r\n    const peticion:IDBOpenDBRequest = indexedDB.open('PacoApp', 2)\r\n    peticion.onerror = evento => {throw 'Error al conectar indexedDB'}\r\n    peticion.onupgradeneeded = (evento:any) => {\r\n                console.log(evento)\r\n    this.conexion = evento.target.result\r\n    this.crear()\r\n        }\r\n    peticion.onsuccess = (evento:any) => {this.conexion = evento.target.result}\r\n  }\r\n\r\n  crear(){\r\n    const tabla:IDBObjectStore = this.conexion.createObjectStore('Favoritas', { keyPath: 'id', autoIncrement: true })\r\n  }\r\n\r\n  insertar(objeto:Peliculas[]){\r\n    const transaccion:IDBTransaction = this.conexion.transaction(['Favoritas'], 'readwrite')\r\n    transaccion.onerror = evento => {throw 'Error al insertar, alomejor has elegido el mismo ðŸ¥²ðŸ¤”'}\r\n    const tabla = transaccion.objectStore('Favoritas')\r\n    const peticion:IDBRequest = tabla.add(objeto)\r\n}\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}